# 智慧职教 慕课 自动化

本项目使用了 [Python3](https://www.python.org/)。
以及以下依赖：

- [BeautifulSoup](https://www.crummy.com/software/BeautifulSoup/):

  ```shell
  pip install beautifulsoup4
  ```
  
**注意！测验不会刷，视频刷完显示已完成，但是没有学习时长！**

## 获取目录

访问以下 URL 并将页面另存为单 HTML 文件作为目录：

```text
https://course.icve.com.cn/learnspace/learn/learn/templateeight/courseware_index.action?params.courseId=6937939f1dfe4af7aef45cc9dcc2459e___
                                                                                                        --------------------------------
                                                                                                        这里改成相应的课程 ID
```

## 运行

修改 `main.py`：

```python
# 刷课间隔（秒）
SLEEP_TIME = 1

# 课程 ID
COURSE_ID = '6937939f1dfe4af7aef45cc9dcc2459e'

# 学习时间
STUDY_TIME = '300'

# 浏览器 Cookie
COOKIE = ''
```

然后执行：

```shell
python3 main.py
```

## 原理

目前摸到了智慧职教以下 API：

### 通过节点或资源 ID 查询详细信息

访问：

```text
GET https://course.icve.com.cn/learnspace/course/study/learningTime_queryCourseItemInfo.action?itemId=1563079670523367426
                                                                                                      -------------------
                                                                                                      节点或资源 ID
```

返回：

```json
{
  "item": {
    "columnType": "doc",
    "recordType": "0",
    "id": "1563079670523367426",
    "title": "模块1学习导航",
    "courseId": "6937939f1dfe4af7aef45cc9dcc2459e",
    "columnName": "文档"
  },
  "success": "true"
}
```

### 通过节点或资源 ID 查询学习状态

#### 访问

```text
GET https://course.icve.com.cn/learnspace/learn/learnCourseware/getSingleItemCompleteCase.json
Body:
  form-data:
    params.courseId: 6937939f1dfe4af7aef45cc9dcc2459e___
    params.itemId: 1563079670523367426
```

#### 返回

```json
{"result":{"itemId":"1563079670523367426","completed":"1"},"success":true}
```

### 保存学习时长

#### 访问

```text
POST https://course.icve.com.cn/learnspace/course/study/learningTime_saveCourseItemLearnRecord.action
Header:
  Cookie: <YOUR COOKIE>
  Body:
    courseId: 6937939f1dfe4af7aef45cc9dcc2459e
    studyTime: 300
    itemId: 1563079672993812481
```

#### 返回

```json
{"success":"true","errorCode":"1","errorMsg":"成功!"}
```

### 保存视频学习时长

这个视频学习时常摸了半天没摸出来 Body 里两个值是哪儿来的
`studyRecord` 也搞不清是什么编码（反正不是 base64

<details>

```text
a102508d11f34b7cb4e1de2666b6fa32

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
```

</details>

Orz 懒得搞了（下次一定

#### 访问

```text
POST https://course.icve.com.cn/learnspace/course/study/learningTime_saveVideoLearnDetailRecord.action
Header:
  Cookie: <YOUR COOKIE>
  Body:
    studyRecord: RqyVqH93zLKwqQSt3KhJ3vDWL7t7uX3bjLKidA0j8y53WCz29lHmg/zzMksoNB5Ye2AKvtsmGPUVDQfElmInpBJL42ST6gI9bsIwyKaJw+gRCWmucddqBHZcvfw7bYb+LLEoxtX3drzCfbki5tHddAtVQU9rSFLa8hlPzUfJvLtJYCut+W0w1h0F34fxrXx77z/InxB3302OtW1oZhj9VUPFV82rIgRAzbpnOXw+WtyZDP7HoJj2Rjob4lPC0EN8asNtqIuPrh7JNFxumXjPG1L6ttRr6DQ3dTPa7jIFeMeSsHe9+HT8iAeVsqK796Piarq/9WUHpRx94LANQM3MuqkBYFX1zMNQcGwoskopED0=
    limitId: e972d8db916a4d7db6f312bf819670fd
```

#### 返回

```json
{
  "data": {
    "timeRecordResult": {
      "msg": "保存视频节点学习时长 和 节点完成状态成功！",
      "success": "true"
    }
  },
  "success": "true",
  "info": "保存成功"
}
```
